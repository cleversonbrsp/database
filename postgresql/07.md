VocÃª chegou ao **NÃ­vel 7: SeguranÃ§a, PermissÃµes e Gerenciamento de Acesso** ğŸ›¡ï¸ğŸ—ï¸  
Esse nÃ­vel Ã© essencial quando se fala de **administraÃ§Ã£o de banco em produÃ§Ã£o**, onde cada usuÃ¡rio deve ter apenas os **poderes necessÃ¡rios**.

---

## ğŸ›¡ï¸ **NÃ­vel 7 â€“ Roles, PermissÃµes e UsuÃ¡rios**

### ğŸ§  **Conceito simples:**
Pense em **usuÃ¡rios** como **membros da guilda** com permissÃµes diferentes:
- O **mestre** (superuser) pode tudo.
- O **guardiÃ£o de dados** pode apenas ler.
- O **escriba** pode inserir registros, mas nÃ£o deletar.

---

## ğŸ§© **Parte 1 â€“ Criar usuÃ¡rios (roles)**

```sql
CREATE ROLE escriba LOGIN PASSWORD 'senha123';
CREATE ROLE guardiao LOGIN PASSWORD 'senha456';
```

---

## âš™ï¸ **Parte 2 â€“ Criar esquema seguro**

Imagine que criamos um esquema chamado `guilda`:

```sql
CREATE SCHEMA guilda AUTHORIZATION current_user;
ALTER ROLE escriba SET search_path = guilda;
ALTER ROLE guardiao SET search_path = guilda;
```

Agora crie as tabelas dentro de `guilda`:
```sql
CREATE TABLE guilda.guerreiros (
  id SERIAL PRIMARY KEY,
  nome TEXT,
  nivel INTEGER
);
```

---

## ğŸ” **Parte 3 â€“ Controlar permissÃµes**

Conceder acesso seletivo:

```sql
GRANT CONNECT ON DATABASE seu_banco TO escriba, guardiao;

-- Leitura para o guardiÃ£o:
GRANT USAGE ON SCHEMA guilda TO guardiao;
GRANT SELECT ON ALL TABLES IN SCHEMA guilda TO guardiao;

-- Escrita para o escriba:
GRANT USAGE ON SCHEMA guilda TO escriba;
GRANT INSERT, SELECT ON guilda.guerreiros TO escriba;
```

Revogar acesso total:
```sql
REVOKE ALL ON guilda.guerreiros FROM PUBLIC;
```

---

## ğŸ§ª **Desafio NÃ­vel 7 â€“ O Conselho da Guilda**

1. Crie os usuÃ¡rios `guardiao` e `escriba`, com senhas.
2. Crie o esquema `guilda` e mova as tabelas para ele.
3. Configure para que:
   - `guardiao` sÃ³ consiga fazer `SELECT`
   - `escriba` consiga fazer `SELECT` e `INSERT`, mas **nÃ£o DELETE**
4. Teste logando com esses usuÃ¡rios no DBeaver e tente executar aÃ§Ãµes.
